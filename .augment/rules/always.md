---
type: "always_apply"
---

# Ubuntu终端美化项目 - 始终应用规则

## 通用行为准则

### 1. 语言和交流
- **中文优先**：总是用中文回答我和我对话
- **技术术语**：保留英文技术术语，但提供中文解释
- **文档规范**：代码注释和文档使用中文，变量名使用英文

### 2. 代码质量标准
- **PEP 8 规范**：Python 代码遵循 PEP 8 编码规范
- **错误处理**：每个函数都必须包含适当的错误处理
- **类型注解**：使用 Python 类型注解提高代码可读性
- **文档字符串**：为所有函数和类提供详细的中文文档字符串

### 3. 系统操作安全
- **权限验证**：执行系统命令前验证用户权限
- **路径安全**：使用绝对路径，避免路径注入攻击
- **输入验证**：验证所有用户输入和外部数据
- **资源清理**：确保临时文件和资源得到正确清理

### 4. Ubuntu 环境适配
- **版本兼容**：支持 Ubuntu 20.04-24.04 LTS 版本
- **架构支持**：同时支持 x86_64 和 ARM64 架构
- **包管理**：使用 apt 包管理器，配置国内镜像源加速
- **服务管理**：使用 systemctl 管理系统服务

### 5. 脚本执行规范
- **幂等性**：脚本可以安全地重复执行
- **进度反馈**：提供清晰的执行进度和状态信息
- **日志记录**：记录详细的操作日志便于调试
- **优雅退出**：处理中断信号，确保优雅退出

### 6. 配置管理
- **备份机制**：修改配置前自动备份原文件
- **版本控制**：跟踪配置文件的变更历史
- **模板系统**：使用配置模板支持个性化定制
- **验证机制**：配置生效前进行语法和逻辑验证

### 7. 性能优化
- **并发处理**：合理使用多线程/多进程提高效率
- **缓存机制**：缓存网络请求和计算结果
- **资源监控**：监控内存和CPU使用情况
- **启动优化**：优化终端和shell的启动速度

### 8. 用户体验
- **交互设计**：提供直观的命令行界面
- **帮助系统**：完善的帮助文档和使用说明
- **错误提示**：友好的错误信息和解决建议
- **进度显示**：长时间操作显示进度条

### 9.测试
- 代码修改之后要运行/root/scripts-for-linux/tests里面的模块测试 和集成测试 然后根据代码的变更相应的增加测试的内容
- 调试代码生成的脚本,在调试完成之后要及时删除 ,除非是长期使用的测试脚本
