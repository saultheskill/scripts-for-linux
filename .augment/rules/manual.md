---
type: "manual"
---

# Ubuntu终端美化项目 - 手动操作规则

## 手动操作指导原则

### 1. 系统级操作确认
在执行以下操作前，必须获得用户明确确认：
- **系统软件包安装/卸载**：apt install/remove 操作
- **系统服务管理**：systemctl start/stop/enable/disable
- **系统配置修改**：修改 /etc/ 下的配置文件
- **用户环境变更**：修改 ~/.bashrc, ~/.zshrc 等配置文件
- **权限变更**：chmod, chown 等权限操作

### 2. 网络操作确认
- **外部资源下载**：从 GitHub、官方源下载文件
- **软件源配置**：修改 /etc/apt/sources.list
- **防火墙配置**：ufw 规则修改
- **SSH 配置变更**：修改 SSH 服务器配置

### 3. 数据安全操作
- **配置文件备份**：在修改前创建备份
- **数据目录操作**：涉及用户数据的移动或删除
- **密钥生成**：SSH 密钥、GPG 密钥生成
- **证书管理**：SSL/TLS 证书相关操作

## 操作前检查清单

### 环境检查
```bash
# 1. 系统版本检查
lsb_release -a

# 2. 架构检查
uname -m

# 3. 权限检查
sudo -v

# 4. 磁盘空间检查
df -h

# 5. 网络连接检查
ping -c 3 www.baidu.com
```

### 依赖检查
```bash
# 1. Python 环境
python3 --version
pip3 --version

# 2. 基础工具
which curl wget git unzip

# 3. 包管理器状态
sudo apt update
```

## 风险评估标准

### 高风险操作（必须确认）
- 修改系统启动配置
- 安装内核模块或驱动
- 修改网络配置
- 删除系统文件
- 修改用户权限

### 中风险操作（建议确认）
- 安装第三方软件包
- 修改 shell 配置
- 创建系统服务
- 修改环境变量

### 低风险操作（可自动执行）
- 创建用户目录
- 下载配置文件
- 显示系统信息
- 检查软件版本

## 错误处理流程

### 1. 操作失败处理
- **记录错误信息**：详细记录错误日志
- **回滚机制**：自动恢复到操作前状态
- **用户通知**：清晰说明失败原因和解决方案
- **重试选项**：提供重试或跳过选项

### 2. 系统状态验证
- **配置验证**：检查配置文件语法正确性
- **服务状态**：验证服务是否正常运行
- **功能测试**：执行基本功能测试
- **性能检查**：确保系统性能未受影响

### 3. 紧急恢复
- **配置回滚**：从备份恢复配置文件
- **服务重启**：重启相关系统服务
- **权限修复**：修复文件权限问题
- **依赖重装**：重新安装损坏的依赖

## 用户交互规范

### 1. 确认提示格式
```
⚠️  系统操作确认
操作类型：[具体操作类型]
影响范围：[影响的系统组件]
风险等级：[高/中/低]
是否继续？[y/N]
```

### 2. 进度显示
- 使用进度条显示长时间操作
- 提供当前步骤和总步骤信息
- 显示预计剩余时间
- 允许用户中断操作

### 3. 结果反馈
- 操作成功：显示绿色成功信息
- 操作失败：显示红色错误信息和解决建议
- 操作警告：显示黄色警告信息
- 操作信息：显示蓝色提示信息

## 特殊场景处理

### 1. ARM 架构适配
- 检测 ARM64/ARMv7 架构
- 使用适配的软件包源
- 调整性能参数
- 验证兼容性

### 2. 容器环境检测
- 检测 Docker/LXC 容器环境
- 调整权限和资源限制
- 跳过不兼容的操作
- 提供容器专用配置

### 3. 云服务器适配
- 检测云服务商环境
- 适配云服务商的网络配置
- 使用云服务商的软件源
- 考虑云服务器的限制

## 日志和监控

### 1. 操作日志
- 记录所有系统级操作
- 包含时间戳和用户信息
- 记录操作前后的系统状态
- 支持日志轮转和清理

### 2. 性能监控
- 监控 CPU 和内存使用
- 检查磁盘 I/O 性能
- 监控网络连接状态
- 记录操作耗时

### 3. 安全审计
- 记录权限变更操作
- 监控敏感文件访问
- 检查异常网络连接
- 验证软件包完整性

总是用中文回答我和我对话
