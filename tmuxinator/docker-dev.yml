# Docker 开发环境 - 适合容器化开发
# 使用方法: tmuxinator start docker-dev

name: docker-dev
root: ~/projects

# 启动前检查 Docker
on_project_start: |
  if ! command -v docker &> /dev/null; then
    echo "警告: Docker 未安装"
  else
    echo "Docker 开发环境准备就绪"
  fi

# 启动命令
on_project_first_start: |
  echo "欢迎使用 Docker 开发环境"
  echo "常用命令:"
  echo "  docker ps        - 查看运行中的容器"
  echo "  docker images    - 查看镜像列表"
  echo "  docker-compose up - 启动 compose 服务"

windows:
  - docker:
      layout: even-vertical
      panes:
        - # Docker 命令面板
        - watch -n 2 'docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"' 2>/dev/null || echo "Docker 未运行"

  - compose:
      root: ~/projects
      layout: main-horizontal
      panes:
        - # docker-compose 目录
        - docker-compose logs -f 2>/dev/null || echo "未找到 docker-compose.yml"

  - build:
      layout: even-horizontal
      panes:
        - # 构建面板
        - # 镜像管理

  - registry:
      layout: even-vertical
      panes:
        - # Harbor/Docker Hub 操作
        - # 镜像推送/拉取
